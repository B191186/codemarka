(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{278:function(t,e,n){"use strict";n.r(e),n.d(e,"classPreviewNewTab",function(){return m});var c=n(40),a=n(41),o=n(42),r=n(43),s=n(0),i=n.n(s),l=n(15),u=n(67),h=n(36),m=function(t){Object(r.a)(n,t);var e=Object(o.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={cssCDN:[],jsCDN:[]},a}return Object(a.a)(n,[{key:"componentWillMount",value:function(){this.props.onClassroomSwitch("classroom")}},{key:"componentDidMount",value:function(){var t=this,e=this.props.match.params.classroomKid,n=new Headers;n.append("Content-Type","Application/json");(function(){var t="".concat("https://code-marka.herokuapp.com/","classroom/preview/").concat(e),c=new Request(t,{method:"GET",cache:"default",headers:n,mode:"cors"});return fetch(c)})().then(function(t){return t.json()}).then(function(e){var n,c,a,o,r,s=document.getElementById("tabpreviewframe");e.status?(n=e.data.css.content,c=e.data.html.content,a=e.data.js.content,o=e.data.css.externalCDN,r=e.data.js.externalCDN,t.setState({cssCDN:o,jsCDN:e.data.js.externalCDN}),document.title="".concat(e.data.name," - Preview on codemarka")):(n="",c="Not Found!",a="");var i,l=function(t){var e=t.html,n=t.css,c=t.js,a=t.CSS_CDN,o=t.JS_CDN,r=function(t,e){var n=new Blob([t],{type:e});return URL.createObjectURL(n)},s=r(n,"text/css"),i=r(c,"text/javascript"),l="",u="";return a.forEach(function(t){l+="<link href=".concat(t.url,' rel="stylesheet"/> \n')}),o.forEach(function(t){u+="<script src=".concat(t.url,"><\/script> \n")}),r('\n  <!DOCTYPE html>\n    <html lang="en">\n      <head>      \n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <meta http-equiv="X-UA-Compatible" content="ie=edge">\n    '.concat(l,"\n\n        ").concat(n&&'<link rel="stylesheet" type="text/css" href="'.concat(s,'" />'),"\n      </head>\n      <body>\n        ").concat(e||"","\n      </body>\n      ").concat(u,"\n      ").concat(c&&'<script src="'.concat(i,'"><\/script>'),"\n    </html>\n  "),"text/html")}({html:c,css:n,js:a,CSS_CDN:o,JS_CDN:r});if(n&&c&&a){s.src=l,(i=s).width=i.contentWindow.document.body.scrollWidth,i.height=i.contentWindow.document.body.scrollHeight}})}},{key:"render",value:function(){return i.a.createElement("div",{className:"h-100vh w-100"},i.a.createElement(u.Helmet,null,this.state.cssCDN.map(function(t){return i.a.createElement("link",{href:t.url,rel:"stylesheet",crossorigin:"anonymous"})}),this.state.jsCDN.map(function(t){return i.a.createElement("script",{src:t.url,key:t.id})})),i.a.createElement("iframe",{id:"tabpreviewframe",className:"w-100 h-100",title:"classpreview"}))}}]),n}(s.Component);e.default=Object(l.b)(null,function(t){return{onClassroomSwitch:function(e){return t(Object(h.a)(e))}}})(m)}}]);